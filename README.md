#Eslint интеграция с teamcity
##Общее описание
Решение выявления новых ошибок линтера eslint и падения сборки с отправкой статуса в
Bitbucket будет реализовано как скрипт для сравнение двух результатов проверок по мас
тер ветке и текущей ветки сборки проекта. Программно это будет отдельный модуль, подк
лючаемый к решению по выставлению статуса сборки на основе проверки результирующего
JSON файла на основе заданных условий. Отправка результата сборки реализовываться в
рамках решения не будет, т.к. есть работающее решение в виде плагина для Teamcity ли
шённое недостатков, которые было-бы необходимо решать.

Решение для выставления статуса сборки по мержу в мастер ветку как аналог встроенному
в teamcity средству failed conditions. Решение будет основано на механизме интеграции
с teamcity - service messages, которое позволяет делать много вещей в том числе выстав
ление статуса сборки и причины падения.

##Техническое описание
###Получение результатов проверки eslint для master ветки
Получение результатов проверки для мастер ветки будет выполняться путём произведения
запросов к teamcity REST API с целью получения артефакта, содержащего файл result.json
Практически будет выполнено несколько запросов с целью выявления последней успешной сбор
ки по master ветке и получение самого артефакта. Мастер ветка определяется исходя из поля
версии в package.json продукта, для которого выполняется скрипт.
###Сравнение результатов
Полученный `result.json` и `result.json` текущей сборки соответственно переименовывются в 
`fromMaster.json` и `fromCurrent.json`. Пути к полученным файлам передаются в скрипт срав
нения и на выходе скрипт генерирует результирующий `result.json`.
Скрипт сравнения поддерживает два интерфейса передачи входных данных:
* интерфейс командной строки:
  аргументы передаются как master и current
* интерфейс модуля:
  аргументы передаются в объекте с ключами master и current
###Интеграция с teamcity
Для интеграции используется доработанный скрипт обработки результатов eslint-teamcity,
а также скрипт teamcity-service-messages.
* `eslint-teamcity` для оформления информации об ошибках eslint в удобном виде
* `teamcity-service-messages` для выставления статуса сборки
###Участие в разработке
PR приветствуются, проверка codestyle и запуск юнит-тестов выполняется автоматически
по PR в репозиторий. Для локального запуска тестов и проверок codestyle необходимо запустить
соответственно `npm test` и `npm codestyle`
